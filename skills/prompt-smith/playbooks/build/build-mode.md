# BUILD Mode 워크플로우

요구사항에서 고품질 프롬프트를 설계하는 7단계 워크플로우입니다.

---

## 워크플로우 개요

```
┌─────────────────────────────────────────────────────────────┐
│                    BUILD 워크플로우                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   GATHER  →  CLASSIFY  →  DESIGN  →  DRAFT                 │
│     ↓                                                       │
│   SELF-LINT  →  TEST  →  DELIVER                           │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│   목표: 8점 이상 프롬프트 + 테스트 케이스 5개 생성          │
└─────────────────────────────────────────────────────────────┘
```

---

## Step 1: GATHER (요구사항 수집)

### 목적
프롬프트의 목표, 대상, 제약 조건을 파악합니다.

### 수집 항목

```markdown
## 요구사항 수집 체크리스트

### 필수 항목
- [ ] **목표**: 이 프롬프트가 달성해야 할 것
- [ ] **대상**: 누가 사용하는가
- [ ] **도메인**: 어떤 분야/산업
- [ ] **성공 기준**: 어떻게 성공을 측정하는가

### 권장 항목
- [ ] **입력 형식**: 어떤 데이터가 들어오는가
- [ ] **출력 형식**: 어떤 형태로 결과가 필요한가
- [ ] **제약 조건**: 금지 사항, 규정, 한계
- [ ] **기존 예시**: 참고할 수 있는 기존 프롬프트/출력

### Claude 4.x 확장
- [ ] **멀티스텝 여부**: 3단계 이상인가?
- [ ] **도구 사용 여부**: 파일/명령/API 필요한가?
```

### 질문 예시

| 카테고리 | 질문 |
|----------|------|
| 목표 | "이 프롬프트로 무엇을 하고 싶으세요?" |
| 대상 | "누가 이 프롬프트를 사용하나요?" |
| 도메인 | "어떤 분야에서 사용되나요?" |
| 성공 | "어떤 결과가 나오면 성공인가요?" |
| 입력 | "어떤 데이터/정보가 입력되나요?" |
| 출력 | "어떤 형식의 결과가 필요한가요?" |
| 제약 | "반드시 피해야 할 것이 있나요?" |

---

## Step 2: CLASSIFY (분류)

### 목적
태스크 유형과 복잡도를 분류하여 적절한 템플릿을 선택합니다.

### 분류 기준

```
┌─────────────────────────────────────────────────────────────┐
│                      태스크 유형                             │
├─────────────────────────────────────────────────────────────┤
│  1. 생성 (Generation)                                       │
│     - 코드 작성, 문서 작성, 콘텐츠 생성                      │
│                                                             │
│  2. 분석 (Analysis)                                         │
│     - 코드 리뷰, 데이터 분석, 문서 평가                      │
│                                                             │
│  3. 변환 (Transformation)                                   │
│     - 번역, 형식 변환, 마이그레이션                          │
│                                                             │
│  4. 추출 (Extraction)                                       │
│     - 정보 추출, 분류, 요약                                 │
│                                                             │
│  5. 대화 (Conversation)                                     │
│     - 고객 응대, Q&A, 챗봇                                   │
└─────────────────────────────────────────────────────────────┘
```

### 복잡도 분류

| 복잡도 | 특성 | 권장 항목 |
|--------|------|----------|
| 단순 | 단일 스텝, 명확한 입출력 | 기본 6항목 (ROLE~SUCCESS_CRITERIA) |
| 중간 | 2-3 스텝, 조건부 로직 | 기본 6항목 + 상세 지시 |
| 복잡 | 4+ 스텝, 도구 사용, 상태 관리 | 8-Point 전체 (확장 항목 포함) |

### Claude 4.x 확장 적용 판단

```markdown
## STATE_TRACKING 필요 여부
- [ ] 3단계 이상 멀티스텝
- [ ] 10개 이상 항목 처리
- [ ] 세션 중단 가능성
→ 하나라도 해당: STATE_TRACKING 적용

## TOOL_USAGE 필요 여부
- [ ] 파일 읽기/쓰기
- [ ] 외부 명령 실행
- [ ] 웹/API 호출
→ 하나라도 해당: TOOL_USAGE 적용
```

---

## Step 3: DESIGN (설계)

### 목적
8-Point Quality Check의 각 요소를 설계합니다.

### 설계 체크리스트

```markdown
## 8-Point 설계

### 1. ROLE (역할)
- 전문성: [어떤 분야 전문가]
- 경험: [몇 년 경력]
- 특성: [어떤 스타일]

### 2. CONTEXT (맥락)
- 도메인: [산업/분야]
- 사용자: [대상]
- 제약: [규정/한계]
- 전제: [가정 사항]

### 3. INSTRUCTION (지시)
- 단계: [1. 2. 3. ...]
- 조건: [if-then 규칙]
- 금칙: [하면 안 되는 것]

### 4. EXAMPLE (예시)
- 예시 1: [입력 → 출력]
- 예시 2: [다른 케이스]
- 엣지: [경계 케이스]

### 5. FORMAT (형식)
- 형식: [JSON/마크다운/표]
- 스키마: [구조 정의]
- 제약: [길이/필수필드]

### 6. SUCCESS_CRITERIA (성공 기준) - v2.7 신규
- 필수 조건: [측정 가능한 완료 조건]
- 검증 방법: [어떻게 확인할지]
- 실패 조건: [무엇이 실패인지]

### 7. STATE_TRACKING (상태 관리) - 해당 시
- 상태 파일: [형식]
- 체크포인트: [시점]
- 재개: [방법]

### 8. TOOL_USAGE (도구 사용) - 해당 시
- 도구: [목록]
- 전략: [병렬/순차]
- 에러: [처리 방법]
```

### 템플릿 선택

| 유형 | 템플릿 |
|------|--------|
| 문서 요약 | Document Summarizer |
| 분류/추출 | Entity Extractor |
| 코드 생성 | Code Generator |
| 고객 응대 | Customer Support Agent |
| 분석/평가 | Content Evaluator |

→ 상세: [template-selection.md](template-selection.md)

---

## Step 4: DRAFT (초안 작성)

### 목적
설계를 바탕으로 프롬프트 초안을 작성합니다.

### 작성 순서

1. **Role 섹션** - 정체성 정의
2. **Context 섹션** - 배경 정보
3. **Instructions 섹션** - 단계별 지시
4. **Examples 섹션** - 2개 이상
5. **Format 섹션** - 출력 형식
6. **State/Tool 섹션** - 해당 시

### 작성 원칙

```
┌─────────────────────────────────────────────────────────────┐
│                    Claude 4.x 작성 원칙                      │
├─────────────────────────────────────────────────────────────┤
│  ✓ 명시적으로: 원하는 것을 직접 요청                         │
│  ✓ 동기 제공: 왜 필요한지 설명                               │
│  ✓ 예시 일치: 예시 형식 = 기대 출력                          │
│  ✓ 구조화: XML 태그 또는 JSON 스키마                         │
│  ✓ 검증 가능: 성공 기준이 객관적                             │
└─────────────────────────────────────────────────────────────┘
```

---

## Step 5: SELF-LINT (자체 검증)

### 목적
8-Point Quality Check로 초안을 검증합니다.

### 검증 프로세스

```markdown
## Self-LINT 체크리스트

### 기본 6항목
- [ ] ROLE: 구체적 역할 정의 (2점)
- [ ] CONTEXT: 충분한 맥락 (2점)
- [ ] INSTRUCTION: 명확한 지시 (2점)
- [ ] EXAMPLE: 2개 이상 예시 (2점)
- [ ] FORMAT: 완전한 형식 정의 (2점)
- [ ] SUCCESS_CRITERIA: 측정 가능한 성공 기준 (2점) ← v2.7 신규

### 확장 2항목 (해당 시)
- [ ] STATE_TRACKING: 체계적 상태 관리 (2점)
- [ ] TOOL_USAGE: 명확한 도구 지시 (2점)

### 점수 계산
원점수: ___ / (적용항목 × 2)
최종 점수: (원점수/적용항목×2) × 10 = ___점
```

### 통과 기준

| 점수 | 결과 |
|------|------|
| 8점 이상 | ✅ Step 6으로 진행 |
| 8점 미만 | ↩️ Step 4로 돌아가서 수정 |

### 개선 포인트

점수가 낮은 항목 우선 개선:
1. 0점 항목: 즉시 추가
2. 1점 항목: 구체화/확장
3. 안티패턴 제거

---

## Step 6: TEST (테스트 생성)

### 목적
프롬프트 검증을 위한 테스트 케이스 5개를 생성합니다.

### 테스트 구성

| # | 유형 | 목적 |
|---|------|------|
| TC-01 | 정상 케이스 1 | 가장 흔한 사용 |
| TC-02 | 정상 케이스 2 | 다른 일반 사용 |
| TC-03 | 엣지 케이스 | 경계 조건 |
| TC-04 | 인젝션 방어 | 보안 검증 |
| TC-05 | 도메인 특화 | 해당 도메인 특수 상황 |

### 테스트 템플릿

```markdown
## TC-0X: [케이스명]

### 입력
```
[테스트 입력]
```

### 기대 결과
- [ ] [검증 가능한 조건 1]
- [ ] [검증 가능한 조건 2]
- [ ] [검증 가능한 조건 3]

### 상태
- [ ] Pass
- [ ] Fail
```

---

## Step 7: DELIVER (전달)

### 목적
완성된 프롬프트와 테스트 케이스를 전달합니다.

### 출력 구성

```markdown
# 📋 BUILD 결과

## 프롬프트 정보
- **이름**: [프롬프트 이름]
- **버전**: v1.0.0
- **유형**: [생성/분석/변환/추출/대화]
- **복잡도**: [단순/중간/복잡]
- **LINT 점수**: X/10

---

## 프롬프트

[전체 프롬프트 내용]

---

## 사용 가이드

### 입력 형식
[입력 방법 설명]

### 기대 출력
[출력 형식 설명]

### 주의 사항
- [주의 1]
- [주의 2]

---

## 테스트 케이스

[5개 테스트 케이스]

---

## 다음 단계
- [ ] 테스트 케이스로 검증
- [ ] 실제 환경 테스트
- [ ] 피드백 기반 개선
- [ ] 회귀 세트 구축
```

---

## Quick Reference

```
┌─────────────────────────────────────────────────────────────┐
│                    BUILD 워크플로우                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. GATHER    요구사항 수집                                  │
│               → 목표/대상/도메인/제약/성공기준               │
│                                                             │
│  2. CLASSIFY  분류                                          │
│               → 유형 + 복잡도 + 확장 항목 적용 여부          │
│                                                             │
│  3. DESIGN    설계                                          │
│               → 7-Point 각 요소 설계                        │
│                                                             │
│  4. DRAFT     초안                                          │
│               → 템플릿 기반 작성                             │
│                                                             │
│  5. SELF-LINT 검증                                          │
│               → 8점 미만이면 Step 4로                       │
│                                                             │
│  6. TEST      테스트                                        │
│               → 5개 테스트 케이스 생성                       │
│                                                             │
│  7. DELIVER   전달                                          │
│               → 프롬프트 + 가이드 + 테스트                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 관련 참조

- [requirement-gathering.md](requirement-gathering.md) - 요구사항 수집 상세
- [template-selection.md](template-selection.md) - 템플릿 선택 가이드
- [../templates/build-report.md](../templates/build-report.md) - BUILD 결과 템플릿
- [../references/quality-checklist.md](../references/quality-checklist.md) - 7-Point 상세
