# ì§€ì—°ì‹œê°„ ìµœì í™” ê°€ì´ë“œ

## Context

Claude API ì‘ë‹µ ì§€ì—°ì‹œê°„ì„ ì¤„ì´ê¸° ìœ„í•œ ì „ëµê³¼ ê¸°ë²•ì…ë‹ˆë‹¤.

## Tool Usage

ì´ ê°€ì´ë“œì—ì„œ ë‹¤ë£¨ëŠ” API í˜¸ì¶œ íŒ¨í„´:
- `client.messages.create()` - ê¸°ë³¸ API í˜¸ì¶œ
- `client.messages.stream()` - ìŠ¤íŠ¸ë¦¬ë° í˜¸ì¶œ

> **ì¶œì²˜**: Anthropic ê³µì‹ ë¬¸ì„œ - Reduce Latency

---

## ëª©ì°¨

- [ì§€ì—°ì‹œê°„ ì¸¡ì •](#ì§€ì—°ì‹œê°„-ì¸¡ì •)
- [ìµœì í™” ì „ëµ (5ê°€ì§€)](#ìµœì í™”-ì „ëµ-5ê°€ì§€)
- [ì‘ì—… ìœ í˜•ë³„ ìµœì í™”](#ì‘ì—…-ìœ í˜•ë³„-ìµœì í™”)
- [í”„ë¡¬í”„íŠ¸ ìµœì í™” íŒ¨í„´](#í”„ë¡¬í”„íŠ¸-ìµœì í™”-íŒ¨í„´)
- [ì§€ì—°ì‹œê°„ vs í’ˆì§ˆ íŠ¸ë ˆì´ë“œì˜¤í”„](#ì§€ì—°ì‹œê°„-vs-í’ˆì§ˆ-íŠ¸ë ˆì´ë“œì˜¤í”„)
- [ì²´í¬ë¦¬ìŠ¤íŠ¸](#ì²´í¬ë¦¬ìŠ¤íŠ¸)
- [ì£¼ì˜ì‚¬í•­](#ì£¼ì˜ì‚¬í•­)
- [ê´€ë ¨ ì°¸ì¡°](#ê´€ë ¨-ì°¸ì¡°)

---

## ì§€ì—°ì‹œê°„ ì¸¡ì •

### ì£¼ìš” ì§€í‘œ

| ì§€í‘œ | ì„¤ëª… | ì¤‘ìš”ë„ |
|------|------|--------|
| **Baseline Latency** | ì „ì²´ ì‘ë‹µ ì‹œê°„ | ì´ ì‚¬ìš©ì ê²½í—˜ |
| **TTFT** | Time To First Token - ì²« í† í°ê¹Œì§€ ì‹œê°„ | ì²´ê° ì‘ë‹µì„± |
| **TPS** | Tokens Per Second - ì´ˆë‹¹ í† í° ìƒì„± | ê¸´ ì‘ë‹µ ì‹œ ì¤‘ìš” |

### ì¸¡ì • ë°©ë²•

```python
import time

start = time.time()
response = client.messages.create(...)
ttft = time.time() - start  # ìŠ¤íŠ¸ë¦¬ë° ì‹œ ì²« ì²­í¬ê¹Œì§€

total_time = time.time() - start
tokens = response.usage.output_tokens
tps = tokens / total_time
```

---

## ìµœì í™” ì „ëµ (5ê°€ì§€)

### 1. ëª¨ë¸ ì„ íƒ

| ëª¨ë¸ | ì†ë„ | í’ˆì§ˆ | ì í•© ìš©ë„ |
|------|------|------|----------|
| **Haiku** | ğŸŸ¢ ê°€ì¥ ë¹ ë¦„ | ê¸°ë³¸ | ê°„ë‹¨í•œ ë¶„ë¥˜, ì¶”ì¶œ, ì§§ì€ ì‘ë‹µ |
| **Sonnet** | ğŸŸ¡ ì¤‘ê°„ | ìš°ìˆ˜ | ë³µì¡í•œ ë¶„ì„, ì½”ë“œ ìƒì„± |
| **Opus** | ğŸ”´ ê°€ì¥ ëŠë¦¼ | ìµœê³  | ë³µì¡í•œ ì¶”ë¡ , ì°½ì˜ì  ì‘ì—… |

**ê¶Œì¥**: ì‘ì—… ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” ê°€ì¥ ì‘ì€ ëª¨ë¸ ì„ íƒ

```python
# ê°„ë‹¨í•œ ë¶„ë¥˜ â†’ Haiku
client.messages.create(
    model="claude-3-5-haiku-20241022",
    ...
)

# ë³µì¡í•œ ì½”ë“œ ë¦¬ë·° â†’ Sonnet
client.messages.create(
    model="claude-sonnet-4-5-20250514",
    ...
)
```

### 2. í† í° ìµœì í™”

#### ì…ë ¥ í† í° ì¤„ì´ê¸°

```markdown
# âŒ ì¥í™©í•œ í”„ë¡¬í”„íŠ¸
You are an incredibly helpful and knowledgeable assistant.
I would really appreciate it if you could help me with the following task.
Please take your time and provide a comprehensive answer.
Now, here is my question: What is 2+2?

# âœ… ê°„ê²°í•œ í”„ë¡¬í”„íŠ¸
What is 2+2?
```

#### ì¶œë ¥ í† í° ì¤„ì´ê¸°

```markdown
# âŒ ê¸´ ì‘ë‹µ ìœ ë„
Explain in detail with examples...

# âœ… ì§§ì€ ì‘ë‹µ ìš”ì²­
Answer in one sentence.
Limit: 50 words.
Format: [answer only, no explanation]
```

### 3. max_tokens ì„¤ì •

ì˜ˆìƒ ì‘ë‹µ ê¸¸ì´ì— ë§ê²Œ `max_tokens` ì„¤ì •

```python
# ì§§ì€ ì‘ë‹µ ì˜ˆìƒ ì‹œ
response = client.messages.create(
    max_tokens=100,  # ì§§ì€ ì œí•œ
    ...
)

# ê¸´ ì‘ë‹µ í•„ìš” ì‹œ
response = client.messages.create(
    max_tokens=2000,  # ì¶©ë¶„í•œ ì—¬ìœ 
    ...
)
```

**ì£¼ì˜**: `max_tokens`ì´ ë„ˆë¬´ ë‚®ìœ¼ë©´ ì‘ë‹µì´ ì˜ë¦´ ìˆ˜ ìˆìŒ

### 4. temperature ì¡°ì •

| temperature | íš¨ê³¼ | ì†ë„ ì˜í–¥ |
|-------------|------|----------|
| 0.0-0.3 | ê²°ì •ì , ì§‘ì¤‘ì  | ë¹ ë¦„ |
| 0.5-0.7 | ê· í˜• | ì¤‘ê°„ |
| 0.8-1.0 | ì°½ì˜ì , ë‹¤ì–‘ | ëŠë¦¼ |

```python
# ì •í™•í•œ ì¶”ì¶œ/ë¶„ë¥˜ â†’ ë‚®ì€ temperature
response = client.messages.create(
    temperature=0.1,
    ...
)

# ì°½ì˜ì  ê¸€ì“°ê¸° â†’ ë†’ì€ temperature (ì†ë„ í¬ìƒ)
response = client.messages.create(
    temperature=0.8,
    ...
)
```

### 5. ìŠ¤íŠ¸ë¦¬ë° í™œìš©

TTFTë¥¼ ì¤„ì—¬ ì²´ê° ì‘ë‹µì„± í–¥ìƒ

```python
# ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ
with client.messages.stream(
    model="claude-sonnet-4-5-20250514",
    messages=[{"role": "user", "content": "..."}],
) as stream:
    for text in stream.text_stream:
        print(text, end="", flush=True)
```

**ì¥ì **:
- ì²« í† í°ì´ ë¹ ë¥´ê²Œ í‘œì‹œ
- ì‚¬ìš©ìê°€ ì‘ë‹µ ìƒì„± ì¤‘ì„ì„ ì¸ì§€
- UI ë°˜ì‘ì„± í–¥ìƒ

---

## ì‘ì—… ìœ í˜•ë³„ ìµœì í™”

### ë¶„ë¥˜/ì¶”ì¶œ (ì†ë„ ìµœìš°ì„ )

```python
response = client.messages.create(
    model="claude-3-5-haiku-20241022",  # ê°€ì¥ ë¹ ë¥¸ ëª¨ë¸
    max_tokens=50,                       # ì§§ì€ ì‘ë‹µ
    temperature=0.0,                     # ê²°ì •ì 
    messages=[{
        "role": "user",
        "content": "Classify: [text]\nOutput: category only"
    }]
)
```

### ì½”ë“œ ìƒì„± (í’ˆì§ˆê³¼ ì†ë„ ê· í˜•)

```python
response = client.messages.create(
    model="claude-sonnet-4-5-20250514",
    max_tokens=1000,
    temperature=0.2,
    messages=[...]
)
```

### ëŒ€í™”í˜• ì‘ë‹µ (ì²´ê° ì†ë„)

```python
# ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ TTFT ìµœì†Œí™”
async for chunk in client.messages.stream(...):
    yield chunk
```

---

## í”„ë¡¬í”„íŠ¸ ìµœì í™” íŒ¨í„´

### ê°„ê²°í•œ ì§€ì‹œ

```markdown
# âŒ ì¥í™©í•¨
I would like you to please analyze the following text and
provide me with a summary that captures the main points.
Please make sure to include all the important details.

# âœ… ê°„ê²°í•¨
Summarize in 3 bullet points:
[text]
```

### ì¶œë ¥ í˜•ì‹ ì œí•œ

```markdown
# âŒ ë¬´ì œí•œ ì¶œë ¥
Explain this concept.

# âœ… ì œí•œëœ ì¶œë ¥
Explain in one paragraph (max 100 words).
```

### Prefillë¡œ í”„ë¦¬ì•°ë¸” ì œê±°

```python
# ë¶ˆí•„ìš”í•œ ì„œë¡  ë°©ì§€
messages = [
    {"role": "user", "content": "List 5 programming languages."},
    {"role": "assistant", "content": "1."}  # ë°”ë¡œ ë¦¬ìŠ¤íŠ¸ ì‹œì‘
]
```

---

## ì§€ì—°ì‹œê°„ vs í’ˆì§ˆ íŠ¸ë ˆì´ë“œì˜¤í”„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Latency-Quality Trade-off                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Fast                                                 Slow  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                             â”‚
â”‚  Haiku        Sonnet                           Opus         â”‚
â”‚  temp=0       temp=0.3-0.5                     temp=0.8+    â”‚
â”‚  max_tokensâ†“  max_tokens medium                max_tokensâ†‘  â”‚
â”‚  No CoT       Simple CoT                       Full CoT     â”‚
â”‚                                                             â”‚
â”‚  Use for:     Use for:                         Use for:     â”‚
â”‚  - ë¶„ë¥˜       - ì½”ë“œ ìƒì„±                      - ë³µì¡í•œ ì¶”ë¡ â”‚
â”‚  - ì¶”ì¶œ       - ë¶„ì„                           - ì°½ì˜ì  ì‘ì—…â”‚
â”‚  - ë¼ìš°íŒ…     - ìš”ì•½                           - ì „ëµ ìˆ˜ë¦½  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â”Œâ”€ Latency Optimization Checklist â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  â–¡ ì‘ì—…ì— ë§ëŠ” ê°€ì¥ ì‘ì€ ëª¨ë¸ ì„ íƒ                          â”‚
â”‚  â–¡ í”„ë¡¬í”„íŠ¸ ê°„ê²°í•˜ê²Œ ì‘ì„±                                   â”‚
â”‚  â–¡ ì¶œë ¥ ê¸¸ì´ ì œí•œ ëª…ì‹œ                                      â”‚
â”‚  â–¡ ì ì ˆí•œ max_tokens ì„¤ì •                                   â”‚
â”‚  â–¡ ì‘ì—…ì— ë§ëŠ” temperature ì„¤ì •                             â”‚
â”‚  â–¡ ì‚¬ìš©ì ëŒ€ë©´ ì‹œ ìŠ¤íŠ¸ë¦¬ë° ì‚¬ìš©                             â”‚
â”‚  â–¡ ë¶ˆí•„ìš”í•œ CoT ì œê±° (ê°„ë‹¨í•œ ì‘ì—…)                          â”‚
â”‚  â–¡ Prefillë¡œ í”„ë¦¬ì•°ë¸” ë°©ì§€                                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì£¼ì˜ì‚¬í•­

### ê³¼ë„í•œ ìµœì í™” ê²½ê³ 

```markdown
âš ï¸ ì§€ì—°ì‹œê°„ ìµœì í™”ì™€ í’ˆì§ˆì€ íŠ¸ë ˆì´ë“œì˜¤í”„ ê´€ê³„

- ë„ˆë¬´ ì§§ì€ í”„ë¡¬í”„íŠ¸ â†’ í’ˆì§ˆ ì €í•˜
- ë„ˆë¬´ ë‚®ì€ max_tokens â†’ ì‘ë‹µ ì˜ë¦¼
- í•­ìƒ Haiku â†’ ë³µì¡í•œ ì‘ì—… ì‹¤íŒ¨

ê¶Œì¥: ì‘ì—… ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” ìµœì†Œí•œì˜ ìµœì í™”
```

### Prompt Improverì™€ì˜ ê´€ê³„

```markdown
Prompt ImproverëŠ” ë” ê¸¸ê³  ìƒì„¸í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
â†’ ë³µì¡í•œ ì‘ì—…ì˜ ì •í™•ë„ í–¥ìƒ
â†’ ë‹¨, ì§€ì—°ì‹œê°„ ì¦ê°€

ì§€ì—°ì‹œê°„ì´ ì¤‘ìš”í•œ ê²½ìš°:
- Prompt Improver ê²°ê³¼ë¥¼ ê°„ì†Œí™”
- ë˜ëŠ” ê°„ë‹¨í•œ í”„ë¡¬í”„íŠ¸ ì§ì ‘ ì‚¬ìš©
```

---

## ê´€ë ¨ ì°¸ì¡°

- [technique-priority.md](technique-priority.md) - ê¸°ë²• ìš°ì„ ìˆœìœ„
- [claude-4x-best-practices.md](claude-4x-best-practices.md) - Claude 4.x ìµœì í™”
- [quality-checklist.md](quality-checklist.md) - í’ˆì§ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸
